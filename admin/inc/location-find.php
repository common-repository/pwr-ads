<?phpif (!function_exists('pwr_geo_enqueue_scripts')) {    /**     * Enqueue Styles and Scripts     */    function pwr_geo_enqueue_scripts()    {        wp_enqueue_style('pwr_geo_styles', PWR_ADS_URL . 'frontend/asst/css/pwr-geo.css');        if (is_front_page() || is_single() || is_page()) {            wp_enqueue_script('pwr_geo_main_js', PWR_ADS_URL . 'frontend/asst/js/pwr_geo.js', array('jquery'), '', true);        }    }}add_action('wp_enqueue_scripts', 'pwr_geo_enqueue_scripts');if (!function_exists('pwr_location_enqueue_scripts')) {    /**     * Create geo data object and send to js file for geo location     */    function pwr_location_enqueue_scripts()    {        wp_localize_script(            'pwr_geo_main_js',            'geodata',            array(                'ajax_url'   => admin_url('admin-ajax.php'),                'ajax_nonce' => wp_create_nonce('pwr_nonce_action_name'),            )        );    }    add_action('wp_enqueue_scripts', 'pwr_location_enqueue_scripts');}if (!function_exists('pwr_get_user_location')) {    /**     * Finds city of the user using geo location.     */    function pwr_get_user_location()    {        $nonce_val = sanitize_text_field(wp_unslash($_POST['security']));        $nonce_val = sanitize_text_field($nonce_val);        if (!wp_verify_nonce($nonce_val, 'pwr_nonce_action_name')) {            wp_die();        }        // If latitude and longitude are submitted.        if (!empty($_POST['latitude']) && !empty($_POST['longitude'])) {            $latitude  = wp_unslash(sanitize_text_field($_POST['latitude']));            $latitude  = sanitize_text_field($latitude);            $longitude = wp_unslash(sanitize_text_field($_POST['longitude']));            $longitude = sanitize_text_field($longitude);            // Send request and receive json data by latitude and longitude.            $url    = 'http://maps.googleapis.com/maps/api/geocode/json?latlng=' . $latitude . ',' . $longitude . '&sensor=false';            $json   = wp_remote_get($url);            $data   = json_decode($json);            $status = $data->status;            // If request status is successful.            if ('OK' === $status) {                // Get address from json data.                $address       = $data->results[0]->formatted_address;                $address_array = $data->results[0]->address_components;            } else {                $address       = '';                $address_array = '';            }        }        wp_send_json_success(            array(                'location_data_sent_to_js' => [$address, $address_array],                'data_recieved_from_js'    => $_POST,            )        );    }    add_action('wp_ajax_geo_ajax_hook', 'pwr_get_user_location');    add_action('wp_ajax_nopriv_geo_ajax_hook', 'pwr_get_user_location');}/** * Register the [pwr_geo_locality] shortcode * * @return {string} div element that will contain the locality */function pwr_geo_locality_shortcode(){    return '<div class="pwr-locality"></div>';}add_shortcode('pwr_geo_locality', 'pwr_geo_locality_shortcode');/** * Register the [pwr_geo_city] shortcode * * @return {string} div element that will contain the city */function pwr_geo_city_shortcode(){    return '<div class="pwr-city"></div>';}add_shortcode('pwr_geo_city', 'pwr_geo_city_shortcode');/** * Register the [pwr_geo_state] shortcode * * @return {string} div element that will contain the state */function pwr_geo_state_shortcode(){    return '<div class="pwr-state"></div>';}add_shortcode('pwr_geo_state', 'pwr_geo_state_shortcode');/** * Register the [pwr_geo_country] shortcode * * @return {string} div element that will contain the country */function pwr_geo_country_shortcode(){    return '<div class="pwr-country"></div>';}add_shortcode('pwr_geo_country', 'pwr_geo_country_shortcode');/** * Register the [pwr_geo_address] shortcode * * @return {string} div element that will contain the address */function pwr_geo_address_shortcode(){    return '<div class="pwr-address"></div>';}add_shortcode('pwr_geo_address', 'pwr_geo_address_shortcode');